(this["webpackJsonpspotify-playlist-builder"]=this["webpackJsonpspotify-playlist-builder"]||[]).push([[0],{214:function(e,t,n){e.exports=n(454)},219:function(e,t,n){},220:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},221:function(e,t,n){},242:function(e,t){},244:function(e,t){},274:function(e,t){},275:function(e,t){},340:function(e,t){},454:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(49),i=n.n(o),l=(n(219),n(220),n(221),n(18)),c=n.n(l),s=n(28),u=n(38),f="#1DB954",m="#9F9F9F",p="#5A5A5A",d="#78A8D4",h=n(470),y=n(473),g=Object(h.a)({root:{height:80,textTransform:"none"}});function v(e){var t=e.selected,n=e.track.name,a=e.track.artists&&e.track.artists[0]&&e.track.artists[0].name,o=e.track.album&&e.track.album.name,i=e.track.album&&e.track.album.images&&e.track.album.images[0]&&e.track.album.images[0].url,l=t?f:p,c=t?"white":m,s=t?m:p,u=t?d:p,h=g();return r.a.createElement(y.a,{className:h.root,style:{width:"90%",display:"flex",flexDirection:"row",borderRadius:8,border:"2px solid "+l,margin:12,padding:8},onClick:function(){e.onSelectTrack(e.track)}},r.a.createElement("img",{src:i,style:{width:48,height:"100%",objectFit:"contain",borderRadius:3}}),r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"row",padding:4}},r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column",alignItems:"left",marginLeft:2}},r.a.createElement("p",{style:{color:c,fontFamily:"Montserrat",fontWeight:900,fontSize:14,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",width:200}},n),r.a.createElement("div",{style:{flex:1}}),r.a.createElement("p",{style:{fontFamily:"Montserrat",fontWeight:900,color:s,fontSize:11,marginLeft:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",width:260}},o)),r.a.createElement("p",{style:{textAlign:"right",fontFamily:"Montserrat",fontWeight:900,color:u,fontSize:11,maxHeight:48,overflow:"hidden"}},a)))}var b=n(37),x=n(50),w=n.n(x),E=n(90),k=n.n(E);function O(e,t){var n=t.accessToken;return new Promise((function(t,a){var r={url:"https://api.spotify.com/v1/search?"+k.a.stringify({q:e,type:"track",limit:8}),headers:{Authorization:"Bearer "+n},json:!0};w.a.get(r,(function(e,n,r){e||200!==n.statusCode?(console.log(n),a(e)):t(r)}))}))}function S(e,t,n){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(c.a.mark((function e(t,n,a){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.accessToken,e.abrupt("return",new Promise((function(e,o){var i=a.id,l={url:"https://api.spotify.com/v1/users/".concat(i,"/playlists"),headers:{Authorization:"Bearer "+r},body:{name:t||"Untitled (Playlist Builder)"},json:!0};w.a.post(l,(function(t,a,i){if(t||200!==a.statusCode&&201!==a.statusCode)console.log(a),o(t);else{var l=i.id,c={url:"https://api.spotify.com/v1/playlists/".concat(l,"/tracks"),headers:{Authorization:"Bearer "+r},body:{uris:n.map((function(e){return"spotify:track:".concat(e)}))},json:!0};w.a.post(c,(function(t,n,a){t||200!==n.statusCode&&201!==n.statusCode?(console.log(n),o(t)):e(i)}))}}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=n(44),F=function(e){return{type:"SET_PLAYLIST",playlist:e}};function D(e){var t=Object(T.useDispatch)(),n=e.trackGroup,a=[];return n?(n.options.forEach((function(e,o){a.push(r.a.createElement(v,{selected:e==n.selected,track:e,key:"".concat(n.text).concat(o),onSelectTrack:function(e){n.selected=e,t(function(e,t){return{type:"SELECT_TRACK",track:e,trackGroup:t}}(e))}}))})),r.a.createElement("div",{style:{marginBottom:22,overflow:"scroll",maxHeight:300}},a)):r.a.createElement("div",null)}var L=n(474),C=function(e){return{type:"PLAYLIST_BUILT",playlistLink:e}},I=Object(h.a)({buildButton:{backgroundColor:f,borderRadius:40,fontFamily:"Montserrat",color:"white",fontSize:20,fontWeight:900,flex:1,maxHeight:60,margin:24,marginTop:0},playlistNameInput:{margin:12,color:f,fontFamily:"Montserrat",fontWeight:900}});function A(){var e=Object(b.useSelector)((function(e){return e.playlist})),t=Object(b.useSelector)((function(e){return e.auth})),n=Object(a.useState)(null),o=Object(u.a)(n,2),i=o[0],l=o[1],f=Object(T.useDispatch)(),m=I();if(!e)return r.a.createElement("div",null);var p=[],d=!0,h=!1,g=void 0;try{for(var x,w=e[Symbol.iterator]();!(d=(x=w.next()).done);d=!0){var E=x.value;E.selected&&p.push(E.selected)}}catch(O){h=!0,g=O}finally{try{d||null==w.return||w.return()}finally{if(h)throw g}}function k(){return(k=Object(s.a)(c.a.mark((function e(){var n,a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i,a=p.map((function(e){return e.id})),e.next=4,S(n,a,t);case 4:r=e.sent,o=r.external_urls.spotify,console.log(r),f(C(o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column"}},r.a.createElement("p",{style:{flex:1,maxHeight:40,fontFamily:"Montserrat",fontSize:24,color:"white",fontWeight:900,marginLeft:12}},"Final Playlist:"),r.a.createElement("div",{style:{display:"flex",flex:1,flexDirection:"column"}},p.map((function(e,t){return r.a.createElement(v,{key:"".concat(t),selected:!0,track:e})}))),r.a.createElement("p",{style:{flex:1,maxHeight:40,fontFamily:"Montserrat",fontSize:24,color:"white",fontWeight:900,marginLeft:12}},"Playlist Name:"),r.a.createElement(L.a,{placeholder:"Untitled (Playlist Builder)",className:m.playlistNameInput,value:i,onChange:function(e){l(e.target.value)}}),r.a.createElement(y.a,{className:m.buildButton,onClick:function(){return k.apply(this,arguments)}},"BUILD PLAYLIST"))}var B=n(128),_=n.n(B),N=n(207),W=n.n(N),z=Object(h.a)({searchButton:{borderRadius:40,fontFamily:"Montserrat",fontSize:20,fontWeight:900,flex:1,maxHeight:60,margin:24,marginTop:0},modalButton:{borderRadius:60,fontFamily:"Montserrat",fontSize:12,fontWeight:900,flex:1,minHeight:60,margin:12,boxShadow:"3px 3px 6px rgba(0, 0, 0, .2)"}});function P(){var e=Object(b.useSelector)((function(e){return e.playlist})),t=Object(b.useSelector)((function(e){return e.auth})),n=Object(b.useSelector)((function(e){return e.created})),o=Object(T.useDispatch)(),i=Object(a.useState)(""),l=Object(u.a)(i,2),m=l[0],d=l[1],h=""!=n&&void 0!=n&&null!=n,g=Object(a.useState)([]),v=Object(u.a)(g,2),x=v[0],w=v[1],E=Object(a.useState)({windowWidth:0,windowHeight:0}),k=Object(u.a)(E,2),S=k[0],j=k[1];function L(){var e="undefined"!==typeof window?window.innerWidth:0,t="undefined"!==typeof window?window.innerHeight:0;j({windowWidth:e,windowHeight:t})}Object(a.useEffect)((function(){return _.a.setAppElement("#root"),L(),window.addEventListener("resize",L),function(){window.removeEventListener("resize",L)}}),[]),Object(a.useEffect)((function(){(function(){var e=Object(s.a)(c.a.mark((function e(){var n,a,r,i,l,s,u,f,m,p,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=[],console.log("searching: ".concat(JSON.stringify(x))),r=!0,i=!1,l=void 0,e.prev=6,s=x[Symbol.iterator]();case 8:if(r=(u=s.next()).done){e.next=20;break}return f=u.value,e.next=12,O(f,t);case 12:m=e.sent,p=m.tracks.items,d={text:f,options:p,selected:p[0]},p[0]&&a.push(p[0]),n.push(d);case 17:r=!0,e.next=8;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(6),i=!0,l=e.t0;case 26:e.prev=26,e.prev=27,r||null==s.return||s.return();case 29:if(e.prev=29,!i){e.next=32;break}throw l;case 32:return e.finish(29);case 33:return e.finish(26);case 34:o(F(n));case 35:case"end":return e.stop()}}),e,null,[[6,22,26,34],[27,,29,33]])})));return function(){return e.apply(this,arguments)}})()()}),[x]);var I=S.windowWidth<900,B=z(),N={app:{display:"flex",flex:1,flexDirection:I?"column":"row"},section:{flex:1,display:"flex",flexDirection:"column",backgroundColor:"#232323",minHeight:400,overflow:"scroll"}};return I?(N.section.maxHeight=void 0,N.section.margin=22):(N.section.maxHeight="90vh",N.section.margin=0),r.a.createElement("div",{style:N.app},r.a.createElement("div",{style:N.section},r.a.createElement("textarea",{className:"TextBox",onInput:function(e){return d(e.currentTarget.value)}}),r.a.createElement(y.a,{variant:"contained",color:"primary",className:B.searchButton,onClick:function(){var e=m.split("\n");w(e)}},"SEARCH")),r.a.createElement("div",{style:N.section},r.a.createElement("p",{style:{flex:1,maxHeight:40,fontFamily:"Montserrat",fontSize:24,color:"white",fontWeight:900,marginLeft:12}},"Select Versions:"),r.a.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"scroll"}},e?e.map((function(e,t){return r.a.createElement(D,{key:"".concat(t),trackGroup:e})})):[])),r.a.createElement("div",{style:N.section},r.a.createElement(A,null)),r.a.createElement(_.a,{isOpen:h,onRequestClose:function(){return o(C(""))},style:{overlay:{backgroundColor:void 0},content:{top:0,left:0,right:0,bottom:0,backgroundColor:void 0,display:"flex",alignItems:"center",justifyContent:"center"}}},r.a.createElement("div",{style:{maxWidth:"70%",width:600,minWidth:300,height:I?375:300,backgroundColor:"white",zIndex:9999,borderRadius:32,alignItems:"center",display:"flex",flexDirection:"column"}},r.a.createElement("p",{style:{color:f,fontFamily:"Montserrat",fontWeight:900,fontSize:50,textAlign:"center",marginTop:12}},"All Done!"),r.a.createElement("p",{style:{color:p,fontFamily:"Montserrat",fontWeight:900,fontSize:24,textAlign:"center",marginTop:2}},"Your playlist is ready."),r.a.createElement("div",{style:{border:"2px solid",borderRadius:24,height:12,width:"70%",display:"flex",justifyContent:"center",alignItems:"center",padding:16,marginTop:24}},r.a.createElement("p",{style:{color:p,fontFamily:"Montserrat",fontWeight:900,fontSize:15,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},n)),r.a.createElement("div",{style:{display:"flex",height:I?96:48,padding:16,flexDirection:I?"column":"row",width:"80%"}},r.a.createElement(W.a,{text:n},r.a.createElement(y.a,{variant:"contained",color:"primary",className:B.modalButton},"Copy To Clipboard")),r.a.createElement(y.a,{variant:"contained",color:"primary",target:"_blank",rel:"noopener noreferrer",href:n,className:B.modalButton},"Go To Playlist"))),r.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"black",opacity:.64,position:"absolute",top:0,left:0},onClick:function(){o(C(""))}})))}var M=n(56),R={isLocal:!1,getDomain:function(){return R.isLocal?"http://localhost:3020":"http://mooselliot.com:3020"}},H=R,U=Object(h.a)({searchButton:{backgroundColor:f,borderRadius:40,fontFamily:"Montserrat",color:"white",fontSize:20,fontWeight:900,width:300,maxHeight:60,margin:24,marginTop:0}});function G(){var e=U();return r.a.createElement("div",{style:{alignItems:"center",display:"flex",flex:1,flexDirection:"column",justifyContent:"center"}},r.a.createElement("div",{style:{flex:1,justifyContent:"center",alignItems:"center",display:"flex"}},r.a.createElement("p",{style:{fontFamily:"Montserrat",color:"#DDDDDD",fontSize:28}},"Here's a simple application to help you build your playlists quickly. ",r.a.createElement("br",null),"1. Paste your list of songs in order ",r.a.createElement("br",null),"2. Press Search ",r.a.createElement("br",null),"3. Select the versions you want ",r.a.createElement("br",null),"4. Press build and you're done!")),r.a.createElement(y.a,{className:e.searchButton,href:function(){var e=H.getDomain()+"/callback",t=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(16);return"https://accounts.spotify.com/authorize?"+M.stringify({response_type:"code",client_id:"a9c4ba8ff14748788cd02e6d42a0e7e8",scope:"user-read-private user-read-email playlist-modify-public playlist-modify-private playlist-read-private playlist-read-collaborative",redirect_uri:e,state:t})}()},"LOGIN"))}var Y=n(127),X=n(46);function q(e){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getaccess"),e.abrupt("return",new Promise((function(e,n){var a={url:H.getDomain()+"/api/getAccessToken",body:{code:t},json:!0};w.a.post(a,(function(t,a,r){console.log(t),console.log(r),console.log(a),r.error?(console.log(a),n(!r.error)):e(r)}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return K.apply(this,arguments)}function K(){return(K=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a={url:H.getDomain()+"/api/getUser",body:{accessToken:t},json:!0};w.a.post(a,(function(t,a,r){r.error?(console.log(a),n(!r.error)):e(r)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=function(e){return{type:"LOGIN",accessToken:e}};function Z(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),o=n[0],i=n[1],l=Object(a.useState)(!1),f=Object(u.a)(l,2),m=f[0],p=f[1],d=k.a.parse(e.location.search,{ignoreQueryPrefix:!0}),h=d.code,y=(d.state,Object(T.useDispatch)());o||function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,q(h);case 3:return t=e.sent,e.next=6,V(t);case 6:n=e.sent,y(Q(t)),y({type:"USER_DATA",userData:n}),console.log(n),p(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();return m?r.a.createElement(X.a,{to:"/build"}):r.a.createElement("p",{style:{fontFamily:"Montserrat",fontSize:24,color:"white",fontWeight:900}},"Logging you in...")}var $=n(45),ee=n(74),te=n(73),ne=n(92),ae=n.n(ne);var re={key:"root",storage:ae.a,blacklist:["auth","playlist"]},oe={key:"auth",storage:ae.a,blacklist:[]},ie=(ae.a,Object($.a)({auth:Object(te.a)(oe,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return null==e?{accessToken:t.accessToken}:Object(ee.a)({},e,{accessToken:t.accessToken});case"USER_DATA":return null==e?t.userData:Object(ee.a)({},e,{},t.userData)}return e})),playlist:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYLIST":return t.playlist;case"SELECT_TRACK":var n=t.track,a=t.trackGroup,r=[],o=!0,i=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u==a?(u.selected=n,r.push(Object(ee.a)({},u,{selected:n}))):r.push(u)}}catch(f){i=!0,l=f}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}return r}return e},created:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYLIST_BUILT":return t.playlistLink}return e}})),le=Object(te.a)(re,ie),ce=n(210),se=n.n(ce);function ue(e){var t=Object(b.useSelector)((function(e){return e.auth})),n=t&&t.images&&t.images[0]&&t.images[0].url;return r.a.createElement("div",{style:{flexDirection:"row",display:"flex",alignItems:"center",marginBottom:12,marginTop:20}},r.a.createElement("p",{className:"AppTitle"}," SPOTIFY PLAYLIST BUILDER "),r.a.createElement("div",{style:{flex:1}}),r.a.createElement("img",{src:n,style:{height:"100%",width:48,objectFit:"contain",borderRadius:24,marginRight:8}}),r.a.createElement("p",{className:"LoggedInUserName"}," ",t&&t.display_name," "))}var fe=n(211),me=n(212),pe=n(472),de=Object($.b)(le,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),he=Object(te.b)(de),ye=Object(me.a)({palette:{primary:{main:f,contrastText:"#FFFFFF"},secondary:{contrastText:"#FFFFFF",main:"#FFFFFF"}},overrides:{MuiInput:{underline:{"&:before":{borderBottom:"2px solid white"}}}}});var ge=function(e){return r.a.createElement(se.a,{store:de},r.a.createElement(Y.a,null,r.a.createElement(fe.a,{persistor:he},r.a.createElement(pe.a,{theme:ye},r.a.createElement("div",{className:"Container"},r.a.createElement(ue,null),r.a.createElement(X.b,{path:"/",exact:!0,component:G}),r.a.createElement(X.b,{path:"/build",component:P}),r.a.createElement(X.b,{path:"/callback",component:Z}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[214,1,2]]]);